<!DOCTYPE html>
<html>
<head>
  <title>Live Chat</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="index.css">
</head>

 <body>
   <div class="mainbox">
   <div class="headDiv">
     <h2>ðŸ’¬ Live Chat</h2>
   </div>

   <div class="chatbox" id="chatbox">
     <p class="chatText_other">Hi there! ðŸ‘‹</p>
     <p class="chatText_me">Hello! ðŸ˜„</p>
   </div>

   <div class="inputdiv">
     <input type="text" class="input" placeholder="message" id="msg">
     <button class="btn" id="send">Send</button>
   </div>
 </div>

  

  <script src="/socket.io/socket.io.js"></script>
  <script>
    const socket = io();

    const btn = document.querySelector(".btn");
    const input = document.querySelector(".input");
    const chatbox = document.querySelector(".chatbox");
    // send message
    btn.addEventListener("click", sendmessage);

    input.addEventListener("keydown", (e) =>{
      if(e.key === "Enter"){
        sendmessage();
      }
    });

    function sendmessage(){
      const text = input.value.trim();

      if(!text) return;

      socket.emit("chat message", text);
      input.value = "";

    }
    // receive message

    socket.on("chat message",(data) =>{
      const p = document.createElement("p");

      if(data.id === socket.id){
        p.className = "chatText_me";
      }else{
        p.className = "chatText_other";
      }
      p.textContent = data.msg;
      chatbox.appendChild(p);

      chatbox.scrollTop = chatbox.scrollHeight;
    });
  </script>
</body>
</html>
